<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="ClaudeCodeMAUI.Views.NewSessionDialog"
             Title="Nuova Sessione">

    <Grid RowDefinitions="Auto,Auto,Auto,Auto,Auto" Padding="30" RowSpacing="20">

        <!-- Titolo -->
        <Label Grid.Row="0"
               Text="Crea una Nuova Sessione Claude Code"
               FontSize="20"
               FontAttributes="Bold"
               HorizontalOptions="Center" />

        <!-- Campo Nome -->
        <VerticalStackLayout Grid.Row="1" Spacing="8">
            <Label Text="Nome Sessione:"
                   FontSize="14"
                   FontAttributes="Bold" />
            <Entry x:Name="NameEntry"
                   Placeholder="es. Bug fix authentication, Nuovo feature cart, ..."
                   FontSize="14"
                   MaxLength="255" />
            <Label Text="âš ï¸ Il nome della sessione Ã¨ obbligatorio per identificarla facilmente"
                   FontSize="11"
                   TextColor="Orange" />
        </VerticalStackLayout>

        <!-- Campo Working Directory -->
        <VerticalStackLayout Grid.Row="2" Spacing="8">
            <Label Text="Working Directory:"
                   FontSize="14"
                   FontAttributes="Bold" />
            <Grid ColumnDefinitions="*,Auto" ColumnSpacing="10">
                <Entry x:Name="WorkingDirectoryEntry"
                       Grid.Column="0"
                       Placeholder="Seleziona la cartella del progetto..."
                       IsReadOnly="True"
                       FontFamily="Consolas"
                       FontSize="12" />
                <Button x:Name="BrowseButton"
                        Grid.Column="1"
                        Text="ðŸ“ Sfoglia"
                        Clicked="OnBrowseClicked"
                        MinimumWidthRequest="100" />
            </Grid>
            <Label Text="âš ï¸ La working directory Ã¨ obbligatoria per avviare una nuova sessione"
                   FontSize="11"
                   TextColor="Orange" />
        </VerticalStackLayout>

        <!-- Informazioni aggiuntive -->
        <VerticalStackLayout Grid.Row="3" Spacing="5" Padding="15" BackgroundColor="#2A2A2A">
            <Label Text="â„¹ï¸ Informazioni sulla Nuova Sessione"
                   FontSize="13"
                   FontAttributes="Bold"
                   TextColor="LightBlue" />
            <Label FontSize="11" TextColor="LightGray">
                <Label.FormattedText>
                    <FormattedString>
                        <Span Text="â€¢ La sessione verrÃ  creata " />
                        <Span Text="senza --resume" FontAttributes="Bold" />
                        <Span Text=" (nuova conversazione da zero)&#10;" />
                        <Span Text="â€¢ Il nome puÃ² essere cambiato in seguito&#10;" />
                        <Span Text="â€¢ La working directory determina il contesto del progetto per Claude&#10;" />
                        <Span Text="â€¢ La sessione verrÃ  automaticamente salvata nel database" />
                    </FormattedString>
                </Label.FormattedText>
            </Label>
        </VerticalStackLayout>

        <!-- Pulsanti Azioni -->
        <HorizontalStackLayout Grid.Row="4"
                               Spacing="15"
                               HorizontalOptions="End"
                               Margin="0,10,0,0">
            <Button Text="Annulla"
                    BackgroundColor="#555555"
                    TextColor="White"
                    Clicked="OnCancelClicked"
                    MinimumWidthRequest="120" />
            <Button x:Name="CreateButton"
                    Text="âœ… Crea Sessione"
                    BackgroundColor="#28A745"
                    TextColor="White"
                    Clicked="OnCreateClicked"
                    IsEnabled="False"
                    MinimumWidthRequest="150" />
        </HorizontalStackLayout>

    </Grid>

</ContentPage>
